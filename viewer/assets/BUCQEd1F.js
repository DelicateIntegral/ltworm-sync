import H from"./Qz3cKtAb.js";import P from"./D2LB3CMC.js";import M from"./Wqr9i7RY.js";import Z from"./YpQZz6cT.js";import R from"./Dhc0HWej.js";import{G as D,a as K,_ as Q}from"./OGljjuRF.js";import{a as $,O as C,o as ee}from"./XSjfLWzy.js";import{i as A,g as oe,J as te,W as ne,u as le,x as re,B as ie}from"./C9y8cii1.js";import{f as se}from"./CjXnXDWP.js";import{d as V,j as g,r as W,t as h,v as _,z as o,R as l,A as p,x as n,Y as F,B as T,y as U,a1 as L,X as B,Z as q,$ as ae,W as de}from"./DEES2_7q.js";import E from"./CWlPIDxY.js";import{_ as ce}from"./Cxe9UohX.js";import{_ as G}from"./VafpNnN3.js";import O from"./C3FUVUWS.js";import J from"./D2N5wx0F.js";import X from"./_YrWI9w-.js";import ue from"./BGnhGhIJ.js";import{u as Y}from"./CYijVCY0.js";import{u as me}from"./uhkJDlB0.js";import pe from"./D6zrVgys.js";import N from"./Dcto6AXF.js";import fe from"./B096Nr7L.js";import _e from"./D9NCZchG.js";import ve from"./DkEi-_VM.js";import{t as z}from"./dcMKVkgL.js";import"./DGEOgZpe.js";import"./0cVxvwXm.js";import"./Bq671gMf.js";import"./CRF9Kq3B.js";import"./DmfvTtO6.js";import"./CA5aLBJS.js";import"./BdcrmPZ0.js";import"./CSADgtts.js";import"./B84Qp10k.js";import"./Be1fzYNM.js";import"./CbcFdRgr.js";import"./ByGRW8N_.js";import"./nrGGw7OG.js";import"./F9OgjhfE.js";import"./BxZJO01r.js";import"./DJt7M_5n.js";import"./CfaNR13r.js";import"./CKeoNHmq.js";import"./B0eGUehL.js";import"./CF8XrXDz.js";import"./2YUoSFiK.js";import"./BMopskjG.js";import"./CcGAR8Qk.js";import"./Zh9U_cYO.js";import"./Cn6cEGdY.js";import"./g2hQxUwo.js";import"./DBnSOLgI.js";import"./DGUWaFOr.js";import"./jPbmp-Am.js";import"./C55ERRCa.js";import"./UH_cZk33.js";import"./Lc9WjBha.js";import"./axN_gOeI.js";import"./DeWZnqcQ.js";import"./BbfqVTRd.js";import"./ylOG_TQU.js";const xe={class:"flex flex-col gap-2 items-stretch"},we={class:"flex flex-row gap-2 justify-stretch"},ye=V({__name:"ChoiceLayout",props:{choiceId:{},index:{}},setup(x){const s=$(),m=x,t=g(()=>{const f=s.getParent(m.choiceId);return s.getChildren(f)[m.index]}),a=g(()=>{var c;const f=(c=t.value.layout)==null?void 0:c.width;return A(f)?"auto":se(y=>y.value===f,D).label}),e=g(()=>{const f=s.getParent(m.choiceId);return s.get(f,C.row).layout.itemWidth}),d=W(),r=W("auto"),i=W(0);function v(f){var y;const c=(y=t.value.layout)==null?void 0:y.width;r.value=A(c)?"auto":"override",i.value=c??e.value,d.value.toggle(f)}function w(){r.value==="auto"?t.value.layout=ee(["width"],t.value.layout??{}):t.value.layout=oe("width",i.value,t.value.layout??{}),d.value.hide()}const u=[{label:"Auto",value:"auto"},{label:"Override",value:"override"}];return(f,c)=>{const y=R,I=Z,k=M,S=P,j=H;return _(),h("div",null,[o(y,{outlined:"",severity:"secondary",label:l(a),"pt:root:class":"leading-none py-0 h-[2.0rem]","pt:icon:class":"leading-none text-[1.5rem] h-[1.5rem]",onClick:v},null,8,["label"]),o(j,{ref_key:"choiceLayoutPopover",ref:d,"pt:content:class":"min-w-[20rem]"},{default:p(()=>[n("div",xe,[n("div",we,[o(I,{modelValue:l(r),"onUpdate:modelValue":c[0]||(c[0]=b=>F(r)?r.value=b:null),options:u,"option-label":"label","option-value":"value",fluid:""},null,8,["modelValue"]),o(y,{label:"Save",fluid:"",onClick:w})]),o(S,null,{default:p(()=>[o(k,{modelValue:l(i),"onUpdate:modelValue":c[1]||(c[1]=b=>F(i)?i.value=b:null),options:l(D),"option-label":"label","option-value":"value",disabled:l(r)!=="override",class:"grow",fluid:""},null,8,["modelValue","options","disabled"]),c[2]||(c[2]=n("label",null,"Item Width",-1))]),_:1})])]),_:1},512)])}}}),he={class:"flex flex-row gap-2"},ge={class:"flex flex-col gap-2"},be=V({__name:"ChoiceMove",props:{choiceId:{},index:{}},setup(x){Y(),$();const{moveRelative:s,moveAbsolute:m}=me(),t=x,a=W(),e=W(0);function d(w){e.value=t.index,a.value.toggle(w)}function r(){s(t.choiceId,-1)}function i(){s(t.choiceId,1)}function v(){m(t.choiceId,e.value),a.value.hide()}return(w,u)=>{const f=G,c=R,y=ue,I=X,k=J,S=O,j=H;return _(),h("div",he,[o(y,null,{default:p(()=>[o(f,{outlined:"",severity:"secondary",icon:"iconify solar--arrow-left-line-duotone",onClick:u[0]||(u[0]=b=>r())}),o(c,{outlined:"",severity:"secondary",label:l(te)(w.index),"pt:root:class":"leading-none p-0 w-[2.5rem] h-[2.0rem]","pt:icon:class":"leading-none text-[1.5rem] w-[1.5rem] h-[1.5rem]",onClick:d},null,8,["label"]),o(f,{outlined:"",severity:"secondary",icon:"iconify solar--arrow-right-line-duotone",onClick:u[1]||(u[1]=b=>i())})]),_:1}),o(j,{ref_key:"indexShiftPopover",ref:a},{default:p(()=>[n("div",ge,[u[4]||(u[4]=n("span",{class:"text-surface-500 text-sm"},"Move to position",-1)),o(S,null,{default:p(()=>[o(I,{modelValue:l(e),"onUpdate:modelValue":u[2]||(u[2]=b=>F(e)?e.value=b:null),"show-buttons":""},null,8,["modelValue"]),o(k,null,{default:p(()=>[o(c,{severity:"secondary",icon:"iconify solar--round-double-alt-arrow-right-line-duotone",onClick:u[3]||(u[3]=b=>v())})]),_:1})]),_:1})])]),_:1},512)])}}}),Ie={class:"flex flex-col gap-2 rounded border border-surface-700 p-2"},$e={class:"flex flex-row justify-between items-center"},Ve={class:"flex flex-row gap-2"},Ce={class:"text-primary text-xl font-bold grow group-hover:underline"},ke={class:"text-surface-500 text-sm"},Se={class:"flex flex-row gap-2"},je={class:"flex flex-col gap-2"},We={class:"font-bold"},Le={class:"max-h-[10rem] overflow-hidden text-ellipsis"},Be=V({__name:"ChoiceCard",props:{choiceId:{},index:{}},setup(x){const s=Y(),m=$(),t=x,a=g(()=>m.get(t.choiceId,C.choice));function e(){s.pushScreen({type:"edit-choice",choiceId:a.value.id})}return(d,r)=>{var u,f,c,y;const i=ye,v=R,w=E;return _(),h("div",Ie,[n("div",$e,[o(be,{"choice-id":d.choiceId,index:d.index},null,8,["choice-id","index"]),o(i,{"choice-id":d.choiceId,index:d.index},null,8,["choice-id","index"]),n("div",Ve,[o(v,{variant:"outlined",size:"small",severity:"secondary"},{default:p(()=>r[1]||(r[1]=[T(" Clone ")])),_:1}),o(v,{variant:"outlined",size:"small",severity:"danger"},{default:p(()=>r[2]||(r[2]=[T(" Delete ")])),_:1})])]),n("div",{class:"flex flex-row items-center cursor-pointer group",onClick:r[0]||(r[0]=I=>e())},[n("div",Ce,U(l(a).name),1),n("div",ke,U(l(a).id),1)]),n("div",Se,[n("div",null,[l(A)((u=l(a).header)==null?void 0:u.image)?(_(),L(w,{key:0,width:"5rem",height:"3rem",animation:"none"})):B("",!0),(f=l(a).header)!=null&&f.image?(_(),L(ce,{key:1,"media-id":l(a).header.image,width:"5rem"},null,8,["media-id"])):B("",!0)]),n("div",je,[n("div",We,U((c=l(a).header)==null?void 0:c.title),1),n("div",Le,U((y=l(a).header)==null?void 0:y.text),1)])])])}}}),Pe={class:"flex flex-row justify-center items-center bg-surface-700"},Re=V({__name:"RowImage",props:{mediaId:{}},setup(x){const s=$(),m=x,t=g(()=>s.media.images[m.mediaId]);return(a,e)=>{const d=_e;return _(),h("div",Pe,[o(d,{src:l(t).data,"pt:image:class":"object-contain object-center"},null,8,["src"])])}}}),Ue={key:0,class:"grid grid-cols-3 gap-2"},Ae={class:"flex flex-col gap-2 items-stretch justify-center grow"},Fe={class:"flex flex-row justify-stretch grow relative group rounded overflow-auto"},De={class:"absolute bg-slate-500/50 top-0 left-0 right-0 bottom-0 opacity-0 group-hover:opacity-100 duration-300 flex flex-row items-center justify-center cursor-pointer"},Ge={class:"flex flex-col gap-2 col-span-2"},Ne={key:1,class:"flex flex-row justify-center items-center min-h-[10rem]"},Te=V({__name:"RowHeaderForm",props:{rowId:{}},setup(x){const s=$(),m=x,t=g(()=>s.get(m.rowId,C.row));return(a,e)=>{var f;const d=E,r=G,i=N,v=P,w=fe,u=R;return l(t).header?(_(),h("div",Ue,[n("div",Ae,[n("div",Fe,[l(A)((f=l(t).header)==null?void 0:f.image)?(_(),L(d,{key:0,animation:"none",class:"grow",height:"auto"})):B("",!0),l(t).header.image?(_(),L(Re,{key:1,"media-id":l(t).header.image,class:"grow border border-surface-700"},null,8,["media-id"])):B("",!0),n("div",De,[e[2]||(e[2]=n("i",{class:"iconify solar--pen-line-duotone"},null,-1)),l(t).header.image?(_(),L(r,{key:0,outlined:"",severity:"danger",icon:"iconify solar--trash-bin-trash-line-duotone",class:"absolute right-[0.5rem] bottom-[0.5rem]"})):B("",!0)])])]),n("div",Ge,[o(v,null,{default:p(()=>[o(i,{modelValue:l(t).header.title,"onUpdate:modelValue":e[0]||(e[0]=c=>l(t).header.title=c)},null,8,["modelValue"]),e[3]||(e[3]=n("label",null,"Title",-1))]),_:1}),o(w,{modelValue:l(t).header.text,"onUpdate:modelValue":e[1]||(e[1]=c=>l(t).header.text=c),"editor-style":"height: 12rem;"},null,8,["modelValue"])])])):(_(),h("div",Ne,[o(u,{variant:"outlined",severity:"secondary",icon:"iconify iconify solar--add-circle-line-duotone",label:"Add Header"})]))}}}),qe={key:0,class:"flex flex-col gap-2 grow"},ze=V({__name:"RowLayoutForm",props:{rowId:{}},setup(x){const s=$(),m=x,t=g(()=>s.get(m.rowId,C.row));return(a,e)=>{const d=M,r=P;return l(t).layout?(_(),h("div",qe,[o(r,null,{default:p(()=>[o(d,{modelValue:l(t).layout.itemAlign,"onUpdate:modelValue":e[0]||(e[0]=i=>l(t).layout.itemAlign=i),options:l(K),"option-label":"label","option-value":"value"},null,8,["modelValue","options"]),e[2]||(e[2]=n("label",null,"Item Position",-1))]),_:1}),o(r,null,{default:p(()=>[o(d,{modelValue:l(t).layout.itemWidth,"onUpdate:modelValue":e[1]||(e[1]=i=>l(t).layout.itemWidth=i),options:l(D),"option-label":"label","option-value":"value"},null,8,["modelValue","options"]),e[3]||(e[3]=n("label",null,"Item Width",-1))]),_:1})])):B("",!0)}}}),He={class:"flex flex-col gap-2 grow"},Me={key:0,class:"p-component p-inputtext flex flex-row gap-1 items-start"},Ee={key:1,class:"p-component p-inputtext flex flex-row gap-1 items-center"},Oe=V({__name:"RowRequirementsForm",props:{rowId:{}},setup(x){const s=$(),m=x,t=g(()=>s.get(m.rowId,C.row));return(a,e)=>{const d=X,r=P,i=Q,v=G;return _(),h("div",He,[o(r,null,{default:p(()=>[o(d,{modelValue:l(t).requirements.allowedChoices,"onUpdate:modelValue":e[0]||(e[0]=w=>l(t).requirements.allowedChoices=w)},null,8,["modelValue"]),e[1]||(e[1]=n("label",null,"Allowed Choices",-1))]),_:1}),o(r,null,{default:p(()=>[e[3]||(e[3]=n("label",null,"Display Condition",-1)),l(t).requirements.display?(_(),h("div",Me,[o(i,{term:l(t).requirements.display,class:"grow"},null,8,["term"]),o(v,{severity:"secondary",icon:"iconify solar--pen-line-duotone",class:"shrink-0"})])):(_(),h("div",Ee,[e[2]||(e[2]=n("div",{class:"text-secondary grow"},"Always Visible",-1)),o(v,{severity:"secondary",icon:"iconify solar--add-circle-line-duotone",class:"shrink-0"})]))]),_:1})])}}}),Je={class:"flex flex-col gap-2"},Xe={class:"flex flex-col gap-2 justify-stretch"},Ye={class:"flex flex-row gap-2"},Ze={class:"flex flex-col"},Ke={class:"flex flex-row gap-2"},Qe={class:"flex flex-col grow"},eo={class:"flex flex-col grow"},oo=V({__name:"RowScreenHeader",props:{rowId:{}},setup(x){const s=$(),m=x,t=g(()=>s.get(m.rowId,C.row));return(a,e)=>{const d=N,r=P,i=Te,v=ze,w=ve;return _(),h("div",Je,[o(w,null,{default:p(()=>[n("div",Xe,[n("div",Ye,[o(r,{class:"grow"},{default:p(()=>[o(d,{modelValue:l(t).name,"onUpdate:modelValue":e[0]||(e[0]=u=>l(t).name=u),modelModifiers:{lazy:!0}},null,8,["modelValue"]),e[2]||(e[2]=n("label",null,"Name",-1))]),_:1}),o(r,null,{default:p(()=>[o(d,{modelValue:l(t).id,"onUpdate:modelValue":e[1]||(e[1]=u=>l(t).id=u),disabled:""},null,8,["modelValue"]),e[3]||(e[3]=n("label",null,"ID",-1))]),_:1})]),n("div",Ze,[e[4]||(e[4]=n("div",{class:"border-b border-surface-700 pb-1 mb-2"},[n("div",{class:"text-xl font-bold text-primary"},"Header")],-1)),o(i,{"row-id":a.rowId},null,8,["row-id"])]),n("div",Ke,[n("div",Qe,[e[5]||(e[5]=n("div",{class:"border-b border-surface-700 pb-1 mb-2"},[n("div",{class:"text-xl font-bold text-primary"},"Layout")],-1)),o(v,{"row-id":a.rowId},null,8,["row-id"])]),n("div",eo,[e[6]||(e[6]=n("div",{class:"border-b border-surface-700 pb-1 mb-2"},[n("div",{class:"text-xl font-bold text-primary"},"Requirements")],-1)),o(Oe,{"row-id":a.rowId},null,8,["row-id"])])])])]),_:1})])}}}),to={class:"flex flex-row justify-between items-center"},no={class:"grid grid-cols-60 gap-2"},mt=V({__name:"RowScreen",props:{rowId:{}},setup(x){const s=$(),m=x,t=g(()=>s.get(m.rowId,C.row)),a=g(()=>{const r=d.value;if(le(r))return s.getChildren(m.rowId);{const i=z(r);return re(({id:v})=>{const w=s.get(v,C.choice);return ie(i,z(w.name))},s.getChildren(m.rowId))}}),e=W(""),d=ne(e,100);return g(()=>60/t.value.layout.itemWidth*4),(r,i)=>{const v=J,w=N,u=R,f=O,c=Be,y=pe;return _(),h(q,null,[o(oo,{"row-id":r.rowId},null,8,["row-id"]),o(y,{value:l(a),"data-key":"id",dt:{header:{padding:"1rem 0"},content:{padding:"1rem 0"}}},{header:p(()=>[n("div",to,[i[3]||(i[3]=n("h3",{class:"text-xl font-bold text-primary"},"Choices",-1)),o(f,{class:"w-auto min-w-8"},{default:p(()=>[o(v,null,{default:p(()=>i[2]||(i[2]=[n("i",{class:"iconify solar--filter-line-duotone"},null,-1)])),_:1}),o(w,{modelValue:l(e),"onUpdate:modelValue":i[0]||(i[0]=I=>F(e)?e.value=I:null),size:"small"},null,8,["modelValue"]),o(v,null,{default:p(()=>[o(u,{icon:"iconify solar--close-circle-line-duotone",severity:"secondary",onClick:i[1]||(i[1]=I=>e.value="")})]),_:1})]),_:1})])]),list:p(({items:I})=>[n("div",no,[(_(!0),h(q,null,ae(I,(k,S)=>{var j,b;return _(),L(c,{key:S,"choice-id":k.id,"parent-id":r.rowId,index:S,class:de(`col-span-${((j=k.layout)==null?void 0:j.width)??((b=l(t).layout)==null?void 0:b.itemWidth)??12}`)},null,8,["choice-id","parent-id","index","class"])}),128))])]),_:1},8,["value"])],64)}}});export{mt as default};
